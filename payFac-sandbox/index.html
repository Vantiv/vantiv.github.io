---

layout: "cnp-sub"

title: "Sandbox"
description: ""

content-title: "Sandbox"
content-description: ""

---

<section id="dev-main" class="pad70 gray">
    <div class="container">
        <div class="row">
            <div class="section-title">Sandbox <span id="status"></span> </div>
            <script>
                function createCORSRequest(method, url) {
                    var request = new XMLHttpRequest();
                    if("withCredentials" in request) {
                        request.open(method, url, true);
                    } else {
                        request = null;
                    }
                    return request;
                }

                function makeCORSRequest() {
                    document.getElementById("status").innerHTML = "<span style='color: darkgoldenrod; size: 30px;' title='checking status' class='glyphicon glyphicon-refresh'></span>";
                    var url = 'https://www.testvantivcnp.com/sandbox/status';
                    var method = 'GET';
                    var request = createCORSRequest(method, url);
                    if(!request) {
                        return;
                    }

                    request.onload = function() {
                        var date = new Date();
                        var status = 'Sandbox is up (Last checked:' + date.toLocaleString() + ')';
                        document.getElementById("status").innerHTML = "<span style='color: green; size: 30px;' title='"+status+"' class='glyphicon glyphicon-ok-circle'></span>";
                    };

                    request.onerror = function() {
                        var date = new Date();
                        var status = 'Sandbox is up (Last checked:' + date.toLocaleString() + ')';
                        document.getElementById("status").innerHTML = "<span style='color: red; size: 30px;' title='"+status+"' class='glyphicon glyphicon-remove-circle'></span>";

                    };

                    request.send();
                }

                makeCORSRequest();
                setInterval(makeCORSRequest, 300000)
            </script>
            <ul class="nav nav-tabs">
                <li>
                    <a href="../sandbox">CNP Online</a>
                </li>
                <li>
                    <a href="../cbk-sandbox">Chargeback</a>
                </li>
                <li class="active">
                    <a href="">PayFac</a>
                </li>
            </ul>
        </div>
        <p></p>
        <div class="row">
            <div class="col-md-3">
                <div id="fixedMenu" class="navbar-spy" data-spy="affix" data-offset-top="280">
                    <ul class="nav nav-bordered nav-stacked" role="tablist">
                        <li  class="active"><a href="#gettingStarted" data-toggle="tab">Getting Started</a></li>
                        <li><a href="#payfac" data-toggle="tab">PayFac API</a></li>
                        <li><a href="#responses" data-toggle="tab">Response Codes</a></li>
                        <li><a href="#examples" data-toggle="tab">PayFac Examples</a></li>
                    </ul>
                    <a href="#top">Back to the top</a>
                </div>
            </div>
            <div class="col-md-9">
                <h3 id="gettingStarted">Getting Started</h3>
                <p>
                    The URL to send all of your PayFac requests to the Sandbox is the following:
                </p>
                <div class="panel panel-success">
                    <div class="panel-heading text-center">Sandbox URL</div>
                    <div class="panel-body text-center">
                        https://www.testvantivcnp.com/sandbox/payfac
                    </div>
                </div>
                <p><strong>NOTE:</strong> Requests made to the Sandbox environment require the connection be TLS 1.2</p>

                <h3>Header Information</h3>

                <table class="table">
                    <thead>
                    <tr>
                        <th>Key</th>
                        <th>Value</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>Authorization Header</td>
                        <td><code>username:password</code></td>
                        <td>Contains Base-64 encoded credentials in this format.</td>
                    </tr>
                    <tr>
                        <td>Content-Type</td>
                        <td><code>application/com.vantivcnp.payfac-v13+xml</code></td>
                        <td>Version number depends on the API used.</td>
                    </tr>
                    <tr>
                        <td>Accept</td>
                        <td><code>application/com.vantivcnp.payfac-v13+xml</code></td>
                        <td>Version number depends on the API used.</td>
                    </tr>
                    </tbody>
                </table>

                <strong>NOTE: </strong>Content-Type and Accept may not be required for all methods. <br>

                <p> <pre>
                        E.g. username:password = merchant1:password
                        Base-64 encoded = bWVyY2hhbnQxOnBhc3N3b3Jk
                    </pre>
                    <strong>NOTE:</strong> Sandbox does not validate the credential. It is recommended to use dummy values
                    for credential to be prepared for live environment.
                </p>

                <p>
                    Send a simple GET request to Sandbox using your HTTP tool.
                    The following would be the <a href="http://en.wikipedia.org/wiki/CURL">curl</a> command to submit
                    the GET request:
                </p>
                <script src="https://gist.github.com/VantivSDK/1c4f0488eb44874e24cf72a2064b0206.js"></script>
                <p>
                    Please check that you don't have a proxy setup. If you do have a proxy setup, here is the command to
                    submit the previous XML with a Proxy.
                </p>
                <script src="https://gist.github.com/VantivSDK/b0d4d65f852cbeb455c6e163b60d8ffd.js"></script>

                <h3 id="payfac">PayFac API Sandbox</h3>
                <p>The following HTTP request methods of the Merchant Provisioner PayFac API are supported in Sandbox.</p>
                <p><strong>NOTE: </strong>To see examples for each of the methods, click on the method name.</p>
                <table class="table">
                    <thead>
                    <tr>
                        <th>Method</th>
                        <th>URI/Query</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody style="font-family: monospace;">
                    <tr>
                        <td><a style="text-decoration: none; color: black;" href="#ex-mccGET">GET</a></td>
                        <td><code>/mcc</code></td>
                        <td>Returns the list of merchant category codes that are currently approved for the Payment Service Provider.</td>
                    </tr>
                    <tr>
                        <td><a style="text-decoration: none; color: black;" href="#ex-legalentityGET">GET</a></td>
                        <td><code>/legalentity/&lt;legalEntityId&gt;</code></td>
                        <td>Request for information and/or status of the designated Legal Entity.</td>
                    </tr>
                    <tr>
                        <td><a style="text-decoration: none; color: black;" href="#ex-agreementGET">GET</a></td>
                        <td><code>/legalentity/&lt;legalEntityId&gt;/agreement</code></td>
                        <td>Request to retrieve all agreements associated with a specified Legal Entity.</td>
                    </tr>
                    <tr>
                        <td><a style="text-decoration: none; color: black;" href="#ex-legalsubmerchantGET">GET</a></td>
                        <td><code>/legalentity/&lt;legalEntityId&gt;/submerchant/&lt;subMerchantId&gt;</code></td>
                        <td>Request to retrieve information about the designated Sub-merchant.</td>
                    </tr>
                    <tr>
                        <td><a style="text-decoration: none; color: black;" href="#ex-legalPUT">PUT</a></td>
                        <td><code>/legalentity/&lt;legalEntityId&gt;</code></td>
                        <td>Request to update data associated with the designated Legal Entity.</td>
                    </tr>
                    <tr>
                        <td><a style="text-decoration: none; color: black;" href="#ex-legalsubmerchantPUT">PUT</a></td>
                        <td><code>/legalentity/&lt;legalEntityId&gt;/submerchant/&lt;subMerchantId&gt;</code></td>
                        <td>Request to update data associated with the designated Sub-merchant.</td>
                    </tr>
                    <tr>
                        <td><a style="text-decoration: none; color: black;" href="#ex-legalPOST">POST</a></td>
                        <td><code>/legalentity</code></td>
                        <td>Request to create a new Legal Entity.</td>
                    </tr>
                    <tr>
                        <td><a style="text-decoration: none; color: black;" href="#ex-agreementPOST">POST</a></td>
                        <td><code>/legalentity/&lt;legalEntityId&gt;/agreement</code></td>
                        <td>Request to designate the version of the agreement along with information about the agreeing party.</td>
                    </tr>
                    <tr>
                        <td><a style="text-decoration: none; color: black;" href="#ex-principalPOST">POST</a></td>
                        <td><code>/legalentity/&lt;legalEntityId&gt;/principal</code></td>
                        <td>Request to create a new Principal associated with a Legal Entity.</td>
                    </tr>
                    <tr>
                        <td><a style="text-decoration: none; color: black;" href="#ex-duplicatePOST">POST</a></td>
                        <td><code>/legalentity/&lt;legalEntityId&gt;/submerchant</code></td>
                        <td>Request to create a Sub-merchant associated with the designated Legal Entity.</td>
                    </tr>
                    <tr>
                        <td><a style="text-decoration: none; color: black;" href="#ex-principalDELETE">DELETE</a></td>
                        <td><code>/legalentity/&lt;legalEntityId&gt;/principal/&lt;principalId&gt;</code></td>
                        <td>Request to delete a Principal associated with a Legal Entity.</td>
                    </tr>
                    </tbody>
                </table>

                <h3 id="responses">PayFac Responses</h3>
                <p>
                    Use the <code>last three characters</code> in the <code>legalEntityId</code> to generate the responses listed
                    below.
                </p>
                <table class="table">
                    <thead>
                    <tr>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody style="font-family: monospace;">
                    <tr>
                        <td>Agreement Responses</td>
                        <td>
                            <span style="color: blue;">000</span> - No Agreements <br />
                            <span style="color: blue;">001</span> - One Agreement <br />
                            <span style="color: blue;">002</span> - Two Agreements<br />
                            <span style="color: blue;">003</span> - Three Agreements<br />
                            <span style="color: blue;">004</span> - Four Agreements<br />
                            <span style="color: blue;">005</span> - Five Agreements<br />
                            <span style="color: blue;">006</span> - Six Agreements<br />
                            <span style="color: blue;">007</span> - Seven Agreements<br />
                            <span style="color: blue;">008</span> - Eight Agreements<br />
                            <span style="color: blue;">009</span> - Nine Agreements<br />
                            <span style="color: blue;">***</span> - Any other code (except HTTP errors) contains One Agreement <br />
                        </td>
                    </tr>
                    <tr>
                        <td>HTTP Errors</td>
                        <td>
                            <span style="color: red; ">400</span> - Could not find requested object.<br />
                            <span style="color: red; ">401</span> - You are not authorized to access this resource. Please check your credentials. <br />
                            <span style="color: red; ">500</span> - Internal Error. This error has already been escalated to Vantiv for resolution. Please contact support with questions.<br />
                            <span style="color: red; ">503</span> - Service was unavailable.<br />
                        </td>
                    </tr>
                    </tbody>
                </table>

                <h3>Submerchant Duplicate Responses</h3>

                <p>
                    There are two types of requests that can be sent in the HTTP POST method with URL <code>/legalentity/&lt;legalEntityId&gt;/submerchant</code>.
                </p>

                <ol>
                    <li>
                        If <code>Merchant Name</code> is set to <code>duplicate all matching</code> in the Request, Sandbox will return a Create Submerchant Response
                        with <code>submerchantId</code> and <code>merchantIdentString</code> only.
                    </li>
                    <li>
                        If <code>Merchant Name</code> is set to <code>duplicate not matching</code> in the Request, Sandbox will return a Create Submerchant Response
                        with <code>originalSubmerchant</code> that has all information on submerchant.
                    </li>
                </ol>

                <h3>Agreement Duplicate Response</h3>

                <p>
                    In the <code>/legalentity/&lt;legalEntityId&gt;/agreement</code> POST method, if the create request sent is a
                    duplicate, the response message will include a <code>duplicate="true"</code> attribute at the end.
                </p>

                <p>
                    More specifically, if the last three digits of the legalEntityId are 000, the root element (in this case
                    <code>legalEntityAgreementCreateResponse</code>) will have the <code>duplicate="true"</code> attribute.
                </p>

                <h3 id="examples">PayFac HTTP Examples</h3>

                <h4>GET Examples</h4>

                <p id="ex-mccGET">
                    To test the <code>/mcc</code> HTTP method send a <strong>GET</strong> request to the URL mentioned below.
                </p>

                <script src="https://gist.github.com/VantivSDK/7b125074fc6358bd346b4ffcf67166cf.js"></script>

                <p>
                    The <code>approvedMccResponse</code> should look similar to below.
                </p>

                <script src="https://gist.github.com/VantivSDK/506d01a6b86c2ad29ef3245924d52d6c.js"></script>

                <p id="ex-legalentityGET">
                    To test the <code>/legalentity/&lt;legalEntityId&gt;</code> HTTP method, send a <strong>GET</strong> request to the URL mentioned below.
                </p>

                <script src="https://gist.github.com/VantivSDK/f5635d6e264abe0b3d5f67534fbc3e8f.js"></script>

                <p>
                    The <code>legalEntityRetrievalResponse</code> should look similar to below.
                </p>

                <script src="https://gist.github.com/VantivSDK/7fb7f1d546f0823a82f0e98acf9393bf.js"></script>

                <p id="ex-agreementGET">
                    To test the Agreement information above send a HTTP <strong>GET</strong> request to the URL mentioned below.
                </p>

                <script src="https://gist.github.com/VantivSDK/4abdf623ece211885aa0975c2dd3c9f5.js"></script>

                <p>
                    This request has a <code>legalEntityId</code> of <code>201003</code>. Therefore, the response should have three
                    <code>legalEntityAgreement</code> as aforementioned.
                </p>

                <p>
                    The <code>legalEntityAgreementRetrievalResponse</code> should look similar to this.
                </p>

                <script src="https://gist.github.com/VantivSDK/32a455c841c1fd0ad667bbaf5acb06f1.js"></script>

                <p id="ex-legalsubmerchantGET">
                    To test the <code>/legalentity/&lt;legalEntityId&gt;/submerchant/&lt;subMerchantId&gt;</code> HTTP method, send a <strong>GET</strong>
                    request to the URL mentioned below.
                </p>

                <script src="https://gist.github.com/VantivSDK/77a14a12abd3e8a208b0bcffed45039a.js"></script>

                <p>
                    The <code>subMerchantRetrievalResponse</code> should look similar  to below.
                </p>

                <script src="https://gist.github.com/VantivSDK/9563ad60cff3b62bb27b87164630311e.js"></script>

                <h4>PUT Examples</h4>

                <p><strong>NOTE: </strong>For each following HTTP request (PUT, POST, and DELETE) send a request that is similar to the one below.</p>

                <script src="https://gist.github.com/VantivSDK/24f0a4782ff09e21eba370d28bf17273.js"></script>

                <p id="ex-legalPUT">
                    A <code>legalEntityCreateRequest</code> can be sent to the Sandbox to receive a <code>legalEntityResponse</code>
                    that contains a random <code>legalIdentityId</code> of max Length 19 characters.
                </p>

                <p>
                    An example of a <code>legalEntityCreateRequest</code> is below.
                </p>

                <script src="https://gist.github.com/VantivSDK/f5635d6e264abe0b3d5f67534fbc3e8f.js"></script>

                <p>
                    The Sandbox will respond with a <code>legalEntityResponse</code> similar to the one below.
                </p>

                <script src="https://gist.github.com/VantivSDK/af57800d63c4b8bf3d9c964d02764165.js"></script>

                <p id="ex-legalsubmerchantPUT">
                    To test the <code>/legalentity/&lt;legalEntityId&gt;/submerchant/&lt;subMerchantId&gt;</code> HTTP method, send a <strong>PUT</strong> request
                    to the URL mentioned below.
                </p>

                <script src="https://gist.github.com/VantivSDK/77a14a12abd3e8a208b0bcffed45039a.js"></script>

                <p>
                    The <code>response</code> should similar to below.
                </p>

                <script src="https://gist.github.com/VantivSDK/237fabd7325aa0d69e163441a838c235.js"></script>

                <h4>POST Examples</h4>

                <p id="ex-legalPOST">
                    To test the <code>/legalentity</code> HTTP method, send a <strong>POST</strong> request to the URL mentioned below.
                </p>

                <script src="https://gist.github.com/VantivSDK/24e82110533a352a472f967fec680559.js"></script>

                <p>
                    The <code>legalEntityCreateResponse</code> should look similar to below.
                </p>

                <script src="https://gist.github.com/VantivSDK/1eb3ceb948365ebe08e411d9873bc937.js"></script>

                <p id="ex-agreementPOST">
                    To test the <code>/legalentity/&lt;legalEntityId&gt;/agreement</code> HTTP method, send a <strong>POST</strong> request to the URL
                    mentioned below.
                </p>

                <script src="https://gist.github.com/VantivSDK/4abdf623ece211885aa0975c2dd3c9f5.js"></script>

                <p>
                    The <code>legalEntityAgreementCreateResponse</code> should look similar to below.
                </p>

                <script src="https://gist.github.com/VantivSDK/04ea89a3be617b9b74cbd69109debdc9.js"></script>

                <p>
                    To test the Agreement duplicate attribute, send a <strong>POST</strong> request to the URL above changing the original
                    ID to 201000. The response should look similar to the one below.
                </p>

                <script src="https://gist.github.com/VantivSDK/6e8ed7047d3329dc9f9a3ecf214ed6c4.js"></script>

                <p id="ex-principalPOST">
                    To test the <code>/legalentity/&lt;legalEntityId&gt;/principal</code> HTTP method, send a <strong>POST</strong> request to the URL mentioned below.
                </p>

                <script src="https://gist.github.com/VantivSDK/3f0a588cf53cdceb177efb42f32e070b.js"></script>

                <p>
                    The <code>principalCreateResponse</code> should look similar to below.
                </p>

                <script src="https://gist.github.com/VantivSDK/67767cfdea3234de409d2b1001c7df50.js"></script>

                <p id="ex-duplicatePOST">
                    The Sandbox will send the response below if <code>Merchant Name</code> is set to <code>duplicate all matching</code>.
                </p>

                <script src="https://gist.github.com/VantivSDK/d519e71b512f0b41f719959d97dd3d41.js"></script>

                <p>
                    The Sandbox will send a response similar to below if <code>Merchant Name</code> is set to <code>duplicate not matching</code>.
                </p>

                <script src="https://gist.github.com/VantivSDK/669ef7e0a01e0beb72a11e9d09bad0f0.js"></script>

                <h4>DELETE Examples</h4>

                <p id="ex-principalDELETE">
                    To test the <code>/legalentity/&lt;legalEntityId&gt;/principal/&lt;principalId&gt;</code> HTTP method, send a <strong>DELETE</strong>
                    request to the URL mentioned below.
                </p>

                <script src="https://gist.github.com/VantivSDK/f4231625955f97a54914eae4c1f4a439.js"></script>

                <p>
                    The <code>principalDeleteResponse</code> should look similar to below.
                </p>

                <script src="https://gist.github.com/VantivSDK/134ba7760bf9baaa8be484b2741ce3a2.js"></script>


            </div>
        </div>
    </div>
</section>
